var GrowthMessage;!function(a,b){function c(){if(a.XMLHttpRequest)return new a.XMLHttpRequest;try{return new a.ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(b){}throw new Error("no xmlhttp request able to be created")}function d(a,b,c){a[b]=a[b]||c}b.ajax=function(a,b){"string"==typeof a&&(a={url:a});var e=a.headers||{},f=a.body,g=a.method||(f?"POST":"GET"),h=a.withCredentials||!1,i=c();i.onreadystatechange=function(){4==i.readyState&&b(i.status,i.responseText,i)},f&&(d(e,"X-Requested-With","XMLHttpRequest"),d(e,"Content-Type","application/x-www-form-urlencoded")),i.open(g,a.url,!0),i.withCredentials=h;for(var j in e)i.setRequestHeader(j,e[j]);i.send(f)},GrowthMessage.nanoajax=b}(window,GrowthMessage||(GrowthMessage={}));var GrowthMessage;!function(a){function b(a){this.t=a}function c(a,b){for(var c=b.split(".");c.length;){if(!(c[0]in a))return!1;a=a[c.shift()]}return a}function d(a,b){return a.replace(e,function(a,e,f,g,h,i,j,k){var l,g=c(b,g),m="";if(!g)return"!"==f?d(h,b):j?d(k,b):"";if(!f)return d(i,b);if("@"==f){a=b._key,e=b._val;for(l in g)g.hasOwnProperty(l)&&(b._key=l,b._val=g[l],m+=d(h,b));return b._key=a,b._val=e,m}}).replace(f,function(a,d,e){return(a=c(b,e))||0===a?"%"==d?new Option(a).innerHTML.replace(/"/g,"&quot;"):a:""})}var e=/\{\{(([@!]?)(.+?))\}\}(([\s\S]+?)(\{\{:\1\}\}([\s\S]+?))?)\{\{\/\1\}\}/g,f=/\{\{([=%])(.+?)\}\}/g;b.prototype.render=function(a){return d(this.t,a)},a.t=b}(GrowthMessage||(GrowthMessage={}));var GrowthMessage;!function(a){var b=function(){function a(){this.events={}}return a.prototype.on=function(a,b,c){this.events[a]={callbackName:b,thisArg:c}},a.prototype.trigger=function(a,b){var c=this.events[a];if(c){var d=c.thisArg?c.thisArg:this;d[c.callbackName](b)}},a}();a.Events=b}(GrowthMessage||(GrowthMessage={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},GrowthMessage;!function(a){var b=function(b){function c(c){b.call(this),this.config=new a.Config,this.dialog=new a.Dialog,this.userAgent=new a.UserAgent,this.userAgent.isViewable()&&(this.id=c.id,this.render(),this.setStyles(),this.bindEvents(),this.config.load("/sample/json/image-0button.json"))}return __extends(c,b),c.prototype.render=function(){var a=document.createElement("div");a.className="growthmessage",document.body.appendChild(a),this.el=document.body.getElementsByClassName(a.className)[0]},c.prototype.setStyles=function(){var b=a.module.require("styles.css"),c=document.createElement("style");c.type="text/css",c.innerHTML=b,document.getElementsByTagName("head")[0].appendChild(c)},c.prototype.bindEvents=function(){this.on("hook","open"),this.config.on("set","open",this)},c.prototype.open=function(){this.dialog.open(this.config.get())},c}(a.Events);a.App=b}(GrowthMessage||(GrowthMessage={}));var GrowthMessage;!function(a){var b=function(b){function c(){b.call(this),this.on("load","set")}return __extends(c,b),c.prototype.load=function(b,c){var d=this;a.nanoajax.ajax({url:b,method:"GET"},function(a,b){d.trigger("load",JSON.parse(b))})},c.prototype.set=function(a){this.data=a,this.trigger("set")},c.prototype.get=function(){return this.data},c}(a.Events);a.Config=b}(GrowthMessage||(GrowthMessage={}));var GrowthMessage;!function(a){var b=function(b){function c(){b.call(this),this.templates={plain:"dialog-text.html",image:"dialog-image.html"}}return __extends(c,b),c.prototype.open=function(a){this.parentElement=document.body.getElementsByClassName("growthmessage")[0],this.render(a),this.setElement(),this.fitOverlay(),this.fitDialog(),this.scaleDialog(),this.bindEvents(),this.animateForOpen(100)},c.prototype.hide=function(a){var b=this;void 0===a&&(a=0),setTimeout(function(){b.parentElement.innerHTML=""},a)},c.prototype.render=function(b){var c=a.module.require(this.templates[b.type]),d=new a.t(c).render(this.filter(b));this.parentElement.innerHTML=d},c.prototype.filter=function(a){var b=[];return a.buttons.forEach(function(c,d){"screen"===c.type?(a._screen=c,"url"===c.intent.type&&(a._screenIsUrlType=!0)):"close"===c.type?a._close=c:("url"===c.intent.type&&(c._isUrlType=!0),b.push(c))}),a.buttons=b,a},c.prototype.setElement=function(){this.el=document.body.getElementsByClassName("growthmessage-dialog")[0]},c.prototype.animateForOpen=function(a){var b=this;void 0===a&&(a=0),setTimeout(function(){var a=document.body.getElementsByClassName("growthmessage-dialog__contents")[0];a.style.transform="scale(1)",a.style["-webkit-transform"]="scale(1)",b.el.style.opacity=1},a)},c.prototype.animateForClose=function(){this.el.style.opacity=0},c.prototype.fitOverlay=function(){var a=document;this.el.width=Math.max(a.body.offsetWidth,a.documentElement.offsetWidth,a.body.clientWidth,a.documentElement.clientWidth),this.el.style.width=this.el.width+"px",this.el.height=Math.max(a.body.scrollHeight,a.documentElement.scrollHeight,a.body.offsetHeight,a.documentElement.offsetHeight,a.body.clientHeight,a.documentElement.clientHeight),this.el.style.height=this.el.height+"px"},c.prototype.fitDialog=function(){var a=document,b=document.body.getElementsByClassName("growthmessage-dialog__inner")[0];b.width=Math.max(a.body.clientWidth,a.documentElement.clientWidth),b.style.width=b.style.width+"px",b.height=Math.min(a.body.clientHeight,a.documentElement.clientHeight),b.style.height=b.height+"px",b.top=Math.max(window.pageYOffset,a.documentElement.scrollTop),b.style.top=b.top+"px"},c.prototype.scaleDialog=function(){var a=document.body.getElementsByClassName("growthmessage-dialog__inner")[0];setTimeout(function(){var b=document,c=Math.min(b.body.clientHeight,b.documentElement.clientHeight);a.offsetHeight<=c||(a.style.transform="scale("+c/a.offsetHeight*.85+")",a.style.transformOrigin="center top",a.style.top=a.top+.075*c+"px")},100)},c.prototype.bindEvents=function(){var a=this,b="ontouchstart"in window?"touchend":"click";this.el.addEventListener(b,function(b){a.hasClass(b.target,"js__growthmessage-dialog__button-close")&&(a.animateForClose(),a.hide(300))})},c.prototype.hasClass=function(a,b){return a.className.split(" ").indexOf(b)>=0},c}(a.Events);a.Dialog=b}(GrowthMessage||(GrowthMessage={}));var GrowthMessage;!function(a){var b=function(){function a(){}return a.prototype.exports=function(a,b){this[a]=b},a.prototype.require=function(a){return this[a]},a}();a.module=new b}(GrowthMessage||(GrowthMessage={}));var GrowthMessage;!function(a){var b=function(a){function b(){a.call(this),this.UA=window.navigator.userAgent.toLowerCase()}return __extends(b,a),b.prototype.isViewable=function(){var a=this,b=function(b){return-1!=a.UA.indexOf(b)};return b("iphone os 6_")||b("iphone os 7_")||b("iphone os 8_")||b("iphone os 9_")||b("iphone os 10_")||b("android 4.")&&b("mobile safari")||b("android 5.")&&b("mobile safari")||b("android 6.")&&b("mobile safari")},b}(a.Events);a.UserAgent=b}(GrowthMessage||(GrowthMessage={})),GrowthMessage.module&&(GrowthMessage.module.exports("styles.css",".growthmessage-dialog{position:absolute;top:0px;left:0px;width:100%;height:100%;background-color:rgba(0,0,0,0.5);opacity:0;font-family:sans-serif;-webkit-transition:all 0.2s;transition:all 0.2s}.growthmessage-dialog__inner{position:absolute;top:0px;left:0px;width:100%;max-height:85%;display:table}.growthmessage-dialog__margin-left,.growthmessage-dialog__margin-right{display:table-cell;width:7.5%}.growthmessage-dialog__contents{display:table-cell;width:85%;vertical-align:middle;-webkit-transform:scale(1.1);transform:scale(1.1);-webkit-transition:all 0.3s;transition:all 0.3s}.growthmessage-dialog-text{display:table;table-layout:fixed;box-sizing:border-box;overflow:hidden;width:100%;background-color:#eaeaea;border-top:1px solid #fff;border-radius:7px}.growthmessage-dialog-text__title{margin:21px 14px 7px 14px;text-align:center;word-wrap:break-word;line-height:24px;font-size:17px;font-weight:bold}.growthmessage-dialog-text__body{margin:0px 21px 21px 21px;text-align:center;word-wrap:break-word;line-height:17px;font-size:13px}.growthmessage-dialog-text__buttons{display:table;table-layout:fixed;width:100%;border-top:1px solid #ccc}.growthmessage-dialog-text__button{display:table-cell;box-sizing:border-box;padding:14px 7px;border-right:1px solid #ccc;text-align:center;vertical-align:middle;word-wrap:break-word;text-decoration:none;font-size:17px;color:#1678e5}.growthmessage-dialog-text__button:hover{background:#efefef;font-weight:bold}.growthmessage-dialog-text__button:last-child{border-right:none}.growthmessage-dialog-image{position:relative;display:table;table-layout:fixed;box-sizing:border-box;width:100%;font-size:0}.growthmessage-dialog-image__bg{display:block}.growthmessage-dialog-image__bg img{max-width:100%;max-height:100%}.growthmessage-dialog-image__buttons{position:absolute;bottom:0;left:0;width:100%;text-align:center;vertical-align:bottom}.growthmessage-dialog-image__button img{max-width:100%;max-height:100%}.growthmessage-dialog__button-close{position:absolute;top:0;right:0;-webkit-transform:translate(50%, -50%) scale(0.5);transform:translate(50%, -50%) scale(0.5);font-size:0}\n"),GrowthMessage.module.exports("dialog-image.html",'<div class="js__growthmessage-dialog__button-close growthmessage-dialog">\n    <div class="growthmessage-dialog__inner">\n        <div class="js__growthmessage-dialog__button-close growthmessage-dialog__margin-left"></div>\n        <div class="js__growthmessage-dialog__button-close growthmessage-dialog__contents">\n            <div class="growthmessage-dialog-image">\n                {{_screenIsUrlType}}\n                    <a href="{{=_screen.intent.url}}" class="growthmessage-dialog-image__bg">\n                        <img src="{{=picture.url}}">\n                    </a>\n                {{:_screenIsUrlType}}\n                    <div class="growthmessage-dialog-image__bg">\n                        <img src="{{=picture.url}}" class="{{_screen}}js__growthmessage-dialog__button-close{{/_screen}}">\n                    </div>\n                {{/_screenIsUrlType}}\n                <div class="growthmessage-dialog-image__buttons">\n                    {{@buttons}}\n                        {{_val._isUrlType}}\n                            <a href="{{=_val.intent.url}}" class="growthmessage-dialog-image__button">\n                                <img src="{{=_val.picture.url}}" class="js__growthmessage-dialog__button-close">\n                            </a>\n                        {{:_val._isUrlType}}\n                            <div class="growthmessage-dialog-image__button">\n                                <img src="{{=_val.picture.url}}" class="js__growthmessage-dialog__button-close">\n                            </div>\n                        {{/_val._isUrlType}}\n                    {{/@buttons}}\n                </div>\n                {{_close}}\n                    <img src="{{=_close.picture.url}}" class="js__growthmessage-dialog__button-close growthmessage-dialog__button-close">\n                {{/_close}}\n            </div>\n        </div>\n        <div class="js__growthmessage-dialog__button-close growthmessage-dialog__margin-right"></div>\n    </div>\n</div>\n'),GrowthMessage.module.exports("dialog-text.html",'<div class="js__growthmessage-dialog__button-close growthmessage-dialog">\n    <div class="growthmessage-dialog__inner">\n        <div class="js__growthmessage-dialog__button-close growthmessage-dialog__margin-left"></div>\n        <div class="js__growthmessage-dialog__button-close growthmessage-dialog__contents">\n            <div class="growthmessage-dialog-text">\n                <div class="growthmessage-dialog-text__title">\n                    {{=caption}}\n                </div>\n                <div class="growthmessage-dialog-text__body">\n                    {{=text}}\n                </div>\n                <div class="growthmessage-dialog-text__buttons">\n                    {{@buttons}}\n                        {{_val._isUrlType}}\n                            <a href="{{=_val.intent.url}}" class="growthmessage-dialog-text__button">\n                                {{=_val.label}}\n                            </a>\n                        {{:_val._isUrlType}}\n                            <div class="js__growthmessage-dialog__button-close growthmessage-dialog-text__button">\n                                {{=_val.label}}\n                            </div>\n                        {{/_val._isUrlType}}\n                    {{/@buttons}}\n                </div>\n            </div>\n        </div>\n        <div class="js__growthmessage-dialog__button-close growthmessage-dialog__margin-right"></div>\n    </div>\n</div>\n'));