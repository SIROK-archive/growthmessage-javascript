var GrowthMessage;!function(a){function b(a){this.t=a}function c(a,b){for(var c=b.split(".");c.length;){if(!(c[0]in a))return!1;a=a[c.shift()]}return a}function d(a,b){return a.replace(e,function(a,e,f,g,h,i,j,k){var l,g=c(b,g),m="";if(!g)return"!"==f?d(h,b):j?d(k,b):"";if(!f)return d(i,b);if("@"==f){a=b._key,e=b._val;for(l in g)g.hasOwnProperty(l)&&(b._key=l,b._val=g[l],m+=d(h,b));return b._key=a,b._val=e,m}}).replace(f,function(a,d,e){return(a=c(b,e))||0===a?"%"==d?new Option(a).innerHTML.replace(/"/g,"&quot;"):a:""})}var e=/\{\{(([@!]?)(.+?))\}\}(([\s\S]+?)(\{\{:\1\}\}([\s\S]+?))?)\{\{\/\1\}\}/g,f=/\{\{([=%])(.+?)\}\}/g;b.prototype.render=function(a){return d(this.t,a)},a.t=b}(GrowthMessage||(GrowthMessage={}));var GrowthMessage;!function(a){var b=function(){function a(){this.events={}}return a.prototype.on=function(a,b,c){this.events[a]={callbackName:b,thisArg:c}},a.prototype.trigger=function(a,b){var c=this.events[a];if(c){var d=c.thisArg?c.thisArg:this;d[c.callbackName](b)}},a}();a.Events=b}(GrowthMessage||(GrowthMessage={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},GrowthMessage;!function(a){var b=function(b){function c(c){b.call(this),this.config=new a.Config,this.dialog=new a.Dialog,this.overlay=new a.Overlay,this.userAgent=new a.UserAgent,this.userAgent.isViewable()&&(this.id=c.id,this.render(),this.bindEvents())}return __extends(c,b),c.prototype.render=function(){var a=document.createElement("div");a.className="growthmessage",document.body.appendChild(a)},c.prototype.bindEvents=function(){this.on("hook","open",this.dialog)},c}(a.Events);a.App=b}(GrowthMessage||(GrowthMessage={}));var GrowthMessage;!function(a){var b=function(a){function b(){a.call(this),this.data={created:"2015-05-09T10:56:06+0000",eventId:"Event:P5C3vzoLOEijnlVj:Default:Open",frequency:1,segmentId:"Segment:P5C3vzoLOEijnlVj:Default:All",cap:100,archived:null,version:3,id:"PBHNxGGXDvZwmF7C",type:"image",task:{created:"2015-04-29T20:44:17+0000",applicationId:"P5C3vzoLOEijnlVj",disabled:!1,availableFrom:"2015-03-31T20:43:42+0000",availableTo:"2015-05-30T20:43:42+0000",updated:"2015-05-13T05:37:22+0000",description:"",name:"テンプレート",id:"PBHNxFzRAJCbeJzS",messages:null},buttons:[{created:"2015-05-09T10:56:07+0000",type:"image",message:null,intent:{extra:{view:"view_x",action:"open_view"},created:"2015-05-09T10:56:00+0000",applicationId:"P5C3vzoLOEijnlVj",description:"",name:"ビューXを開く",id:"PCBT6eyyGDmbSaqV",type:"custom"},picture:{url:"http://growthmessage.s3-ap-northeast-1.amazonaws.com/pictures/PBHNrmKWXffI7J8K.png",created:"2015-04-29T20:43:56+0000",applicationId:"P5C3vzoLOEijnlVj",deleted:null,updated:"2015-04-29T20:43:56+0000",width:600,height:100,name:"message_button_a.png",id:"PBHNrmKWXffI7J8K",extension:"png"},id:"PCBT8NakhmGVdzT7"},{created:"2015-05-09T10:56:07+0000",type:"image",message:null,intent:{created:"2015-04-01T01:45:47+0000",applicationId:"P5C3vzoLOEijnlVj",description:"何もしません",name:"なし",id:"P8Z2cC64j2m6Oq5b",type:"noop"},picture:{url:"http://growthmessage.s3-ap-northeast-1.amazonaws.com/pictures/PBHNt1hv4yoK6y7e.png",created:"2015-04-29T20:44:01+0000",applicationId:"P5C3vzoLOEijnlVj",deleted:null,updated:"2015-04-29T20:44:01+0000",width:600,height:100,name:"message_button_b.png",id:"PBHNt1hv4yoK6y7e",extension:"png"},id:"PCBT8O10MQLnp8Yp"},{created:"2015-05-09T10:56:07+0000",type:"close",message:null,intent:{created:"2015-04-01T01:45:47+0000",applicationId:"P5C3vzoLOEijnlVj",description:"何もしません",name:"なし",id:"P8Z2cC64j2m6Oq5b",type:"noop"},picture:{url:"http://growthmessage.s3-ap-northeast-1.amazonaws.com/pictures/PAWVlWykDsEOVzbD.png",created:"2015-04-21T20:20:31+0000",applicationId:"P5C3vzoLOEijnlVj",deleted:null,updated:"2015-04-21T20:20:31+0000",width:50,height:50,name:"close_button.png",id:"PAWVlWykDsEOVzbD",extension:"png"},id:"PCBT8ODjEYEX8Fec"}],picture:{url:"http://growthmessage.s3-ap-northeast-1.amazonaws.com/pictures/PBHNqPsEgKW52TQC.png",created:"2015-04-29T20:43:51+0000",applicationId:"P5C3vzoLOEijnlVj",deleted:null,updated:"2015-04-29T20:43:51+0000",width:600,height:730,name:"message_background.png",id:"PBHNqPsEgKW52TQC",extension:"png"}}}return __extends(b,a),b.prototype.get=function(){return this.data},b}(a.Events);a.Config=b}(GrowthMessage||(GrowthMessage={}));var GrowthMessage;!function(a){var b=function(b){function c(){b.call(this),this.styles={".growthmessage-dialog-text__title":{"font-size":"24px"},".growthmessage-dialog-text__body":{"font-size":"16px"},".growthmessage-dialog-text__button":{width:"300px","font-size":"16px",color:"#fff","background-color":"#000"}}}return __extends(c,b),c.prototype.open=function(){this.render("dialog-text",{}),this.setStyles(this.styles)},c.prototype.render=function(b,c){var d=a.module.require(b),e=new a.t(d).render(c),f=document.body.getElementsByClassName("growthmessage")[0];f.innerHTML=e},c.prototype.setStyles=function(a){Object.keys(a).forEach(function(b){var c=a[b],d=document.body.querySelectorAll(b)[0];d&&Object.keys(c).forEach(function(a){d.style[a]=c[a]})})},c}(a.Events);a.Dialog=b}(GrowthMessage||(GrowthMessage={}));var GrowthMessage;!function(a){var b=function(){function a(){}return a.prototype.exports=function(a,b){this[a]=b},a.prototype.require=function(a){return this[a]},a}();a.module=new b}(GrowthMessage||(GrowthMessage={}));var GrowthMessage;!function(a){var b=function(a){function b(){a.call(this)}return __extends(b,a),b}(a.Events);a.Overlay=b}(GrowthMessage||(GrowthMessage={}));var GrowthMessage;!function(a){var b=function(a){function b(){a.call(this),this.UA=window.navigator.userAgent.toLowerCase()}return __extends(b,a),b.prototype.isViewable=function(){var a=this,b=function(b){return-1!=a.UA.indexOf(b)};return b("iphone os 6_")||b("iphone os 7_")||b("iphone os 8_")||b("iphone os 9_")||b("iphone os 10_")||b("android 4.")&&b("mobile safari")||b("android 5.")&&b("mobile safari")||b("android 6.")&&b("mobile safari")},b}(a.Events);a.UserAgent=b}(GrowthMessage||(GrowthMessage={})),GrowthMessage.module&&(GrowthMessage.module.exports("dialog-image",'<div class="growthmessage-dialog-image">\n    \n</div>\n'),GrowthMessage.module.exports("dialog-text",'<div class="growthmessage-dialog-text">\n    <div class="growthmessage-dialog-text__title">\n        hogehoge\n    </div>\n    <div class="growthmessage-dialog-text__body">\n        fugafuga\n    </div>\n    <div class="growthmessage-dialog-text__button">\n        piyopiyo\n    </div>\n</div>\n'));